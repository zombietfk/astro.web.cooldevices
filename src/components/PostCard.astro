---
import { TONE_MAP, type ToneMapKey } from "../utils/toneMap";

const { title, date, excerpt, href = "#", tone = "cyan" } = Astro.props;

const toneCssVar: string = TONE_MAP[tone as ToneMapKey] ?? "var(--cyan)";
---

<article class="card surface" style={`--tone:${toneCssVar}`}>
  <div class="meta">
    <a class="title" href={href}>{title}</a>
    <div class="muted date">
      Posted: {new Date(date).toLocaleDateString()}
    </div>
  </div>
  <p class="excerpt">{excerpt}</p>
</article>

<style>
  .card {
    padding: 16px 16px;
    border-radius: var(--radius);
    box-shadow: none;
    position: relative;
  }
  .card::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: var(--radius);
    border: 1px solid color-mix(in srgb, var(--tone) 28%, transparent);
    pointer-events: none;
  }
  .title {
    display: block;
    color: var(--tone);
    text-decoration: none;
    font-weight: 900;
    font-size: 18px;
    letter-spacing: 0.1px;
  }
  .title:hover {
    text-decoration: underline;
    text-decoration-color: color-mix(in srgb, var(--tone) 55%, transparent);
  }
  .date {
    font-size: 12px;
    margin-top: 2px;
  }
  .excerpt {
    margin: 10px 0 0;
    color: rgba(233, 237, 243, 0.85);
  }
</style>
